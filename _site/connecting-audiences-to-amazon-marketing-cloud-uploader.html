<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Guidance for Connecting Audiences to Amazon Marketing Cloud Uploader | AWS Solutions Library Samples</title><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="/images/aws.png"><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/index.html" class="site-title lh-tight"> AWS Solutions Library Samples </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul style="padding-right: 10px;font-weight: 600;">Guidance for Connecting Audiences to Amazon Marketing Cloud Uploader</ul><hr><ul class="nav-list"><li class="nav-list-item active"> <a href="#" class="nav-list-link">Get started</a><li class="nav-list-item active"> <a href="#implementation" class="nav-list-link">Implementation</a><li class="nav-list-item active"> <a href="#formatting-data-for-amc-uploader-from-aws" class="nav-list-link">Formatting Data For AMC uploader from AWS</a><li class="nav-list-item active"> <a href="#amc-file-format-requirements" class="nav-list-link">AMC file format requirements</a><li class="nav-list-item active"> <a href="#amc-data-types-timestamp-and-date-formats" class="nav-list-link">AMC Data Types, Timestamp and Date Formats</a><li class="nav-list-item active"> <a href="#amc-fact-vs-dimension-datasets" class="nav-list-link">AMC fact vs dimension datasets</a></ul><ul class="nav-list"></ul></nav></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AWS Solutions Library Samples" aria-label="Search AWS Solutions Library Samples" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="//github.com/just-the-docs/just-the-docs" class="site-button" > Just the Docs on GitHub </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><div id="main-content" class="main-content" role="main"><div class="post-header"><h1 class="post-title-main"> Guidance for Connecting Audiences to Amazon Marketing Cloud Uploader</h1></div><p class=".fs-6 .fw-300"> <b>Summary:</b> This guide will help Amazon Marketing Cloud (AMC) users retrieve data from AWS Clean Rooms as well as third-party data sources, such as Salesforce Marketing Cloud, Adobe Experience Platform, and Google Cloud Platform and import the data into AMC.</p><hr /><p>This guide will help Amazon Marketing Cloud (AMC) users retrieve data from AWS Clean Rooms as well as third-party data sources, such as Salesforce Marketing Cloud, Adobe Experience Platform, and Google Cloud Platform. The guide also explains how to import that data into AMC using Amazon Marketing Cloud (AMC) Uploader from AWS.</p><h2 id="implementation"> <a href="#implementation" class="anchor-heading" aria-labelledby="implementation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementation</h2><p><strong>AWS Connectors</strong></p><p>AWS connectors are available to support data ingestion from external third-party sources into AWS. These connectors bring data into an Amazon Simple Storage Service (Amazon S3) bucket so AMC Uploader from AWS can access the data. Once users make the data available and have formatted it in accordance with the AMC file format requirements, AMC Uploader from AWS imports the data into AMC. Data sources may include:</p><ul><li><p>Salesforce Marketing Cloud Connector Solution</p><li><p>Adobe Experience Platform Connector Solution</p><li><p>Google Cloud Connector</p></ul><p><strong>Importing data from</strong> <strong>AWS Clean Rooms</strong> <strong>to AMC</strong></p><p>AWS Clean Rooms helps customers and their partners match, analyze, and collaborate on their collective datasets—without sharing or revealing underlying data. AWS Clean Rooms supports exporting data that can be used to create datasets within AMC using a <ins>LIST</ins> analysis rule on a configured table within a collaboration.</p><p class="note"><em>When communicating with your collaboration partner, ensure that the data they are sharing is within the same region as your AMC Instance. AWS Clean Rooms does not support cross-region data collaborations.</em></p><p><strong>Setting up the collaboration</strong></p><ol><li><p>Navigate to the AWS Clean Rooms service within the AWS Management Console</p><li><p>Select <strong>Create collaboration</strong></p><li><p>Input a name for the collaboration and an optional description</p><li><p>Set up the Members</p><p>a. Input a member display name for yourself</p><p>b. Input a member display name and AWS Account ID for each member you will be collaborating with</p><li><p>Select yourself as the member who will be performing queries and receiving results</p><li><p>Optional: Enable query logging or cryptographic computing</p><li><p>Select <strong>Create</strong> and join collaboration</p><li><p>Each member you invited will now need to accept the invitation to collaborate within their AWS Clean Rooms console.</p></ol><p><strong>Configuring a table</strong></p><p class="note">It’s assumed that you already have your data within an S3 Bucket within the same region as your AWS Clean Room and that you’ve already configured a Glue Table that is maintaining the schema of your data. <ins>This is a requirement before completing the next steps</ins>.</p><ol><li><p>Navigate to the <strong>Configured Tables</strong> section on the sidebar within the AWS Clean Rooms Console</p><li><p>Select <strong>configure new table</strong></p><li><p>Select the relevant AWS Glue Database and Table</p><li><p>Select which columns will be allowed within the collaboration. You can select all columns or individually select specific columns to be shared.</p><li><p>Give the table a name</p><li><p>Select <strong>configure new table</strong></p></ol><p>You must now configure an Analysis rule. An Analysis rule impacts how the tables can be queried and which data will be exposed</p><ol><li><p>Locate the alert to configure an analysis rule (it may be at the top of the page). Select <strong>Configure analysis rule</strong></p><li><p>Select <strong>List</strong> for the Type and use the <strong>Guided flow</strong> as the creation method</p><li><p>Select <strong>Next</strong></p><li><p>Select a join control column that you have determined with your collaborators to use as a match key. You can select one or multiple columns.</p><li><p>Select which columns you wish to expose to your collaborators as list controls</p><li><p>Select <strong>Next</strong></p><li><p>Validate the information is correct on the review page. If everything looks good, select <strong>Configure analysis rule</strong></p></ol><p><strong>Associate your table to the collaboration</strong></p><p>Now that you’ve created a collaboration and configured your table, you need to associate that table to the collaboration.</p><ol><li><p>Navigate to the collaboration that you’ve set up</p><li><p>Navigate to the Tables tab and select <strong>Associate table</strong></p><li><p>Select the table that you just created</p><li><p>Input a table name and optional description. Ensure that the table name is unique to the collaboration and that you do not overlap table names with your collaborators</p><li><p>For Service access, you can either have the service provision a new IAM Role for you or you can create a new one separately using the policy document given on the page</p><li><p>Select <strong>Associate table</strong></p></ol><p>By associating your table to your collaboration, you can monitor the <strong>Tables</strong> tab to see when other collaborating members have associated their tables. The other collaborators will need to follow the same steps here to ensure that the proper data is being exposed and the same analysis rule is applied to the associated tables.</p><p><strong>Querying the collaboration and storing the results</strong></p><p>Once your collaborators have successfully set up their side of the collaboration, you can start performing queries:</p><ol><li><p>Navigate to the collaboration and select the <strong>Queries</strong> tab</p><li><p>You will be prompted to set up a query output location</p><p>a. Select the same S3 Bucket you used to store your first party data when deploying the AMC Uploader Solution. You should also set up a dedicated folder in that S3 Bucket for the AWS Clean Room query output.</p><p>b. <ins>Ensure that you select CSV as the output format</ins></p><li><p>You can now input your SQL query into the box and select <strong>Run.</strong> The results will be outputed into the console as well as within the S3 Bucket and path you specified.</p></ol><p><strong>Uploading your AWS Clean Rooms output to Amazon Marketing Cloud</strong></p><p class="note"><em>Note: It is assumed that you’ve already deployed AMC Uploader Solution. <ins>This is a requirement before completing the next steps</ins></em></p><ol><li><p>Navigate to the AMC Uploader Solution web interface</p><li><p>Select <strong>Step 1</strong> - Select file on the left side bar</p><li><p>Select the file that was outputted from AWS Clean Rooms and select <strong>Next</strong></p><li><p>Input a name for the Dataset name and optional description</p><li><p>Select <strong>CSV</strong> for the File format and <strong>Dimension</strong> for the Dataset type.</p><li><p>Select Next</p><li><p>Map the schema to the columns that were discovered within the file.</p><p>a. Ensure that if any column contains personally identfiable information (PII) data, that you specify PII as the Column Type and select the relevant PII type. This will ensure that this data is hashed prior to being uploaded to AMC.</p><p>b. Ensure that any column where you wish to perform an aggregate function is defined as a Metric column type</p><li><p>Select <strong>Next</strong></p><li><p>Verify the data is correct and select <strong>Submit</strong></p></ol><p>Once submitted, a new dataset will be created within AMC and an AWS Glue Job has been created to normalize and hash the data. You can monitor the Glue Job by selecting it under <strong>Phase 2: Datasets transformed.</strong></p><p>Once the Glue Job has been completed, the data will be outputed into another S3 Bucket that the AMC Uploader Solution created. AMC will then access that bucket and extract the data to be inserted into the newly created Dataset within AMC. You can monitor that process as well in the <strong>Phase 3: Datasets uploaded</strong> section by selecting on the relevant Dataset in Phase 1</p><p><strong>Importing data from Salesforce Marketing Cloud (SFMC) to AMC using the SFMC Connector Solution</strong></p><p>When you deploy the SFMC Connector Solution, it will create multiple S3 buckets to handle the raw and transformed data. To upload the data into AMC, you will be setting up an S3 Bucket Replication Rule to automatically send the raw data that is imported to an S3 Bucket where all of your first party data will live.</p><ol><li><p>Before deploying the solution, ensure that you select a region that matches the same region your AMC Instance is deployed in. For North America, this is us-east-1 and for EMEA/APAC, this is eu-west-1. You can find the region your instance is deployed in by visiting the instance info page within the AMC Console.</p><li><p>Deploy the Solution using the provided CloudFormation template. Follow the implementation guide’s deployment steps for more information. Ensure that <ins>Subscriber</ins> is the data you are importing from SFMC.</p><li><p>Ensure that the AppFlow that was created as part of the SFMC solution has been executed and is importing data. If not, trigger the job to run or set up the flow on a schedule to import data on a cadence you specify.</p><li><p>Once the solution is deployed, go to the Outputs tab of the CloudFormation template and save the value of <ins>BucketInboundData</ins>. This is where your raw data will be saved to and where we will need to replicate data from.</p><li><p>Select the link specified in the BucketInboundData value. This will take you directly to the created S3 Bucket.</p><li><p>Select on the bucket name in the breadcrumb at the top of the page, it should start with <strong>sfmc-connector-inboundbucket.</strong></p><li><p>Select the <strong>Management</strong> tab and scroll down to <strong>Replication rules</strong></p><li><p>Select <strong>Create replication rule</strong></p><li><p>Enter a name such as AMCDataReplication</p><li><p>Data coming into the InboundBucket will be saved with the prefix “sfmc-connector-flow/”. Enter “sfmc-connector-flow/” (without quotes) into the Prefix box.</p><li><p>For the Destination, select a bucket that you will use to store your first party data that will be accessed by the AMC Uploader. If you do not have a bucket, create a new one. Make sure the bucket is in the same region as your AMC Instance. Ensure that versioning is enabled in the destination bucket as it is required for replication. If versioning is not enabled on the destination bucket, you can enable it directly from the <strong>Replication</strong> set up page within the Console.</p><li><p>Next, select an existing IAM Role to allow the replication, or select <strong>Create new role</strong></p><li><p>The SFMC connector uses an AWS KMS key to encrypt the raw data. Check the box for <strong>Replicate objects encrypted with AWS KMS</strong> and specify the KMS key that the files are encrypted with. If you are unsure which KMS key is used, browse to one of the files in the S3 bucket that was imported from SFMC and locate the <strong>Encryption key ARN</strong></p><li><p>Leave all other options as default</p><li><p>Select <strong>Save.</strong> If versioning is not enabled in the source bucket, the console may prompt you to enable versioning. You can do so by selecting the enable version control button.</p><li><p>Once saved, you will be on the Batch Operations Job page</p><li><p>Uncheck <strong>Generate completion report</strong></p><li><p>Leave all other details default</p><li><p>Select <strong>Save</strong></p><li><p>The job will run immediately and the data will be replicated to your AMC first party data S3 Bucket</p></ol><p><strong>Uploading your AWS Clean Rooms output to Amazon Marketing Cloud</strong></p><p class="note"><em>Note: It is assumed that you’ve already deployed AMC Uploader Solution.<ins>This is a requirement before completing the next steps</ins></em></p><ol><li><p>Navigate to the AMC Uploader Solution web interface</p><li><p>Select <strong>Step 1</strong> - Select file on the left side bar</p><li><p>Select the file that was outputted from the SFMC Connector and select <strong>Next</strong></p><li><p>Input a name for the <strong>Dataset</strong> name and optional description</p><li><p>Select <strong>CSV</strong> for the File format and <strong>Dimension</strong> for the Dataset type.</p><li><p>Select <strong>Next</strong></p><li><p>Map the schema to the columns that were discovered within the file.</p><p>a. Ensure that if any column contains PII data, that you specify PII as the Column Type and select the relevant PII type. This will ensure that this data is hashed prior to being uploaded to AMC.</p><p>b. Ensure that any column where you wish to perform an aggregate function is defined as a Metric column type</p><li><p>Select <strong>Next</strong></p><li><p>Verify the data is correct and select <strong>Submit</strong></p></ol><p>Once submitted, a new dataset will be created within AMC and an AWS Glue Job has been created to normalize and hash the data. You can monitor the Glue Job by selecting it under <strong>Phase 2: Datasets transformed.</strong></p><p>Once the Glue Job is complete, the data will be outputed into another S3 Bucket that the AMC Uploader Solution created. AMC will then access that bucket and extract the data to be inserted into the newly created Dataset within AMC. You can monitor that process as well in the <strong>Phase 3: Datasets uploaded</strong> section by selecting on the relevant Dataset in <strong>Phase 1.</strong></p><h2 id="formatting-data-for-amc-uploader-from-aws"> <a href="#formatting-data-for-amc-uploader-from-aws" class="anchor-heading" aria-labelledby="formatting-data-for-amc-uploader-from-aws"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Formatting data for AMC Uploader from AWS</h2><p>When the data is imported into an Amazon S3 bucket, it must be in one of the accepted formats in the AMC data upload file format requirements. Additionally, the data must be in a single file. AMC Uploader from AWS will take care of AMC formatting requirements, including hashing specific columns, flagging data as specific PII, and segmenting data into separate files by time windows.</p><p>AMC supports two types of datasets: (1) Dimension and (2) Fact. Users must ensure the data meets the relative requirements. See the AMC Fact vs. Dimension Datasets section below for more information about the differences between these two dataset types.</p><h2 id="amc-file-format-requirements"> <a href="#amc-file-format-requirements" class="anchor-heading" aria-labelledby="amc-file-format-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AMC file format requirements</h2><p><strong>AMC Uploader from AWS requirements</strong></p><p>The AMC Uploader from AWS requires data to be in a single file in either CSV or JSON format. As of 2023, the AMC Uploader from AWS does not support multiple files in partition format.</p><p><strong>CSV file requirements</strong></p><p>CSV files must be <strong>UTF-8 encoded</strong> and comma delimited. In Microsoft Excel, save the file in a “CSV UTF- 8 (comma-delimited)” format. When CSV files are uploaded, AMC will automatically convert data to the corresponding column type. For example, if “12423.56” is contained in the CSV file and is mapped to a <strong>DECIMAL</strong> type column, AMC will coerce the string value contained in the CSV file to the appropriate column type.</p><p><strong>JSON file requirements</strong></p><p>JSON files must contain one object per row of data. JSON arrays should not be used. Table 1 is an example of the accepted JSON format:</p><div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product A"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="mi">11352987</span><span class="p">,</span><span class="w"> </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"pur_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-23T19:53:58Z"</span><span class="p">}</span><span class="w"> 
</span><span class="p">{</span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product B"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="mi">18467234</span><span class="p">,</span><span class="w"> </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"pur_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-24T19:53:58Z"</span><span class="p">}</span><span class="w"> 
</span><span class="p">{</span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product C"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="mi">27264393</span><span class="p">,</span><span class="w"> </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"pur_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-25T19:53:58Z"</span><span class="p">}</span><span class="w"> 
</span><span class="p">{</span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product A"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="mi">48572094</span><span class="p">,</span><span class="w"> </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"pur_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-25T19:53:58Z"</span><span class="p">}</span><span class="w"> 
</span><span class="p">{</span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product B"</span><span class="p">,</span><span class="w"> </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="mi">18278476</span><span class="p">,</span><span class="w"> </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nl">"pur_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-26T13:33:58Z"</span><span class="p">}</span><span class="w">
</span></code></pre></div></div><p><em>Table 1- Example of the accepted JSON format</em></p><h2 id="amc-data-types-timestamp-and-date-formats"> <a href="#amc-data-types-timestamp-and-date-formats" class="anchor-heading" aria-labelledby="amc-data-types-timestamp-and-date-formats"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AMC Data Types, Timestamp, and Date Formats</h2><p>Dataset columns can be defined with the data types listed in Table 2. Carefully review the accepted formats for <strong>TIMESTAMP</strong> and <strong>DATE</strong> columns. If values in CSV / JSON data do not meet the accepted format, the upload may fail.</p><p>Ensure all values in CSV / JSON data confirm the specified data type and format before uploading. Where possible, string values will be coerced to the corresponding numerical type and vice-versa, but no guarantees are made on the casting process.</p><div class="table-wrapper"><table><thead><tr><th>Data Type<th>Format<th>Example<tbody><tr><td>STRING<td>UTF-8 encoded character data<td>My string data<tr><td>DECIMAL<td>Numerical with two floating point level precision<td>123.45<tr><td>INTEGER (int 32-bit)<td>32-bit numerical, no floating points<td>12345<tr><td>LONG (int 64-bit)<td>32-bit numerical, no floating points<td>1233454565875646<tr><td>TIMESTAMP<td>yyyy-MM-ddThh:mm:ssZ<td>2021-08-02T08:00:00Z<tr><td>DATE<td>yyyy-MM-dd<td>8/2/2021</table></div><p><em>Table 2 - Data Types and Formats</em></p><h2 id="amc-fact-vs-dimension-datasets"> <a href="#amc-fact-vs-dimension-datasets" class="anchor-heading" aria-labelledby="amc-fact-vs-dimension-datasets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> AMC fact vs dimension datasets</h2><p>Before data can be uploaded, a table (also referred to as a dataset) must be created to store that data. As mentioned above, AMC supports two types of datasets: fact and dimension. The implications for each dataset type is detailed in Table 3:</p><div class="table-wrapper"><table><thead><tr><th>Dataset Type<th>Usage<th>Requires Timestamp Column<th>Requires Partition Type (Period)<tbody><tr><td>Fact<td>Time series data<td>Yes<td>Yes<tr><td>Dimension<td>Static data<td>No<td>No</table></div><p><em>Table 3 - Differences between Fact and Dimension Datasets</em></p><p><strong>Fact datasets</strong></p><p>Fact datasets should be used for time-series data, meaning data where each row is associated with a corresponding date or timestamp. When defining a fact dataset, it is mandatory to designate one column as the main event time.<br /> <br /> Because fact datasets are used to store time-series data, the data files must be partitioned by a unit of time before uploading to AMC. The partition type (also referred to as a period) should be specified on the dataset, and the options are per-minute, per-hour, per-day, and per-week. The partition type informs how often the data can be queried. For example, per-week partitioned data cannot be queried at the daily level, and per-day partitioned data cannot be queried at the hourly level.<br /> <br /> When data is uploaded to a fact dataset, each upload is performed according to a specific period of time. This is how AMC determines which data to include when performing queries. The AMC Uploader from AWS separates the partitions.</p><p><strong>Dimension datasets</strong></p><p>Dimension datasets can be used to upload static data or any information that is not time-bound. Examples include customer relationship management (CRM) audience lists, campaign metadata, mapping tables, and product metadata, such as a table mapping ASINs to external product names or sensitive cost-of-goods-sold data. When data is uploaded to a dimension dataset, AMC will always use the most recent file uploaded, which is known as the full-replace method of updating data.</p><p>Dimension datasets do not require a main event time column or uploaded files to be partitioned.</p><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p></footer></div></div><div class="search-overlay"></div></div>
